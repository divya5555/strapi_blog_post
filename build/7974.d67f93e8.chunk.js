"use strict";(self.webpackChunkblog_project=self.webpackChunkblog_project||[]).push([[7974],{21289:(x,g,e)=>{e.d(g,{I:()=>t,U:()=>n});const t="strapi_stage",n="strapi_assignee"},72026:(x,g,e)=>{e.r(g),e.d(g,{InformationBoxEE:()=>ee});var t=e(67294),n=e(30972),l=e(50236),r=e(78048),s=e(96987),f=e(60914),c=e(53768),i=e(86896),u=e(88767),T=e(86706),E=e(21892),v=e(54920),A=e(36364),a=e(21289);function R(){const{initialData:O,layout:{uid:y},isSingleType:B,onChange:$}=(0,n.Wq)(),j=(0,T.v9)(A._),{formatMessage:d}=(0,i.Z)(),{formatAPIError:Y}=(0,n.So)(),M=(0,n.lm)(),{put:Z}=(0,n.kY)(),{allowedActions:{canReadUsers:C},isLoading:N}=(0,n.ss)({readUsers:j.settings.users.read}),{users:K,isLoading:G,isError:Q}=(0,v.R)({},{enabled:!N&&C}),k=O?.[a.U]??null,U=async({value:m})=>{h.mutate({entityId:O.id,assigneeId:parseInt(m,10),uid:y})},h=(0,u.useMutation)(async({entityId:m,assigneeId:_,uid:z})=>{const W=B?"single-types":"collection-types",{data:{data:D}}=await Z(`/admin/content-manager/${W}/${z}/${m}/assignee`,{data:{id:_}});return $({target:{name:a.U,value:D[a.U]}},!0),D},{onSuccess(){M({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}})}});return t.createElement(r.g,{name:a.U,id:a.U},t.createElement(s.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(f.hQ,{clearLabel:d({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:Q&&C&&d({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||h.error&&Y(h.error),disabled:!N&&!G&&K.length===0,name:a.U,id:a.U,value:k?k.id:null,onChange:m=>U({value:m}),onClear:()=>U({value:null}),placeholder:d({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:d({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),loading:G||N||h.isLoading},K.map(m=>t.createElement(c.O,{key:m.id,value:m.id,textValue:(0,E.Gf)(m,d)},(0,E.Gf)(m,d))))))}var S=e(90090),P=e(10574),L=e(74863),w=e(90820),I=e(61456),F=e(75021),p=e(38705),o=e(86978);function X({id:O,layout:y}={},B={}){const{kind:$,uid:j}=y,d=$==="collectionType"?"collection-types":"single-types",{get:Y}=(0,n.kY)(),{data:M,isLoading:Z,refetch:C}=(0,u.useQuery)(["content-manager",d,y.uid,O,"stages"],async()=>{const{data:G}=await Y(`/admin/content-manager/${d}/${j}/${O}/stages`);return G},B),N=t.useMemo(()=>M?.meta??{},[M?.meta]),K=t.useMemo(()=>M?.data??[],[M?.data]);return{meta:N,stages:K,isLoading:Z,refetch:C}}var b=e(5318);function V(){const{initialData:O,layout:y,isSingleType:B,onChange:$}=(0,n.Wq)(),{put:j}=(0,n.kY)(),{formatMessage:d}=(0,i.Z)(),{formatAPIError:Y}=(0,n.So)(),M=(0,n.lm)(),{meta:Z,stages:C,isLoading:N,refetch:K}=X({id:O.id,layout:y},{enabled:!!O?.id}),{getFeature:G}=(0,F.q)(),[Q,k]=t.useState(!1),U=G("review-workflows"),h=O?.[a.I]??null,m=(0,u.useMutation)(async({entityId:W,stageId:D,uid:H})=>{const J=B?"single-types":"collection-types",{data:{data:q}}=await j(`/admin/content-manager/${J}/${H}/${W}/stage`,{data:{id:D}});return $({target:{name:a.I,value:q[a.I]}},!0),await K(),q},{onSuccess(){M({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),_=async({value:W})=>{try{U?.[o.Ef]&&parseInt(U[o.Ef],10)<Z.workflowCount?k("workflow"):U?.[o._X]&&parseInt(U[o._X],10)<C.length?k("stage"):m.mutateAsync({entityId:O.id,stageId:W,uid:y.uid})}catch{}},{themeColorName:z}=h?.color?(0,b.k)(h?.color):{};return t.createElement(t.Fragment,null,t.createElement(r.g,{hint:C.length===0&&d({id:"content-manager.reviewWorkflows.stages.no-transition",defaultMessage:"You don\u2019t have the permission to update this stage."}),name:a.I,id:a.I},t.createElement(s.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(S.q4,{disabled:C.length===0,error:m.error&&Y(m.error)||null,name:a.I,id:a.I,value:h?.id,onChange:W=>_({value:W}),label:d({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:h&&t.createElement(s.k,{as:"span",height:2,background:h?.color,borderColor:z==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>t.createElement(s.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},t.createElement(P.Z,{textColor:"neutral800",ellipsis:!0},h?.name??""),N?t.createElement(L.a,{small:!0,style:{display:"flex"},"data-testid":"loader"}):null)},C.map(({id:W,color:D,name:H})=>{const{themeColorName:J}=(0,b.k)(D);return t.createElement(S.ag,{key:W,startIcon:t.createElement(s.k,{height:2,background:D,borderColor:J==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:W,textValue:H},H)})),t.createElement(w.J,null),t.createElement(I.c,null))),t.createElement(p.fC,{isOpen:Q==="workflow",onClose:()=>k(!1)},t.createElement(p.Dx,null,d({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(p.uT,null,d({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),t.createElement(p.fC,{isOpen:Q==="stage",onClose:()=>k(!1)},t.createElement(p.Dx,null,d({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),t.createElement(p.uT,null,d({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}function ee(){const{isCreatingEntry:O,layout:{options:y}}=(0,n.Wq)(),B=y?.reviewWorkflows??!1;return t.createElement(l.d.Root,null,t.createElement(l.d.Title,null),B&&!O&&t.createElement(t.Fragment,null,t.createElement(V,null),t.createElement(R,null)),t.createElement(l.d.Body,null))}},75021:(x,g,e)=>{e.d(g,{q:()=>r});var t=e(67294),n=e(30972),l=e(88767);function r({enabled:s}={enabled:!0}){const{get:f}=(0,n.kY)(),{data:c,isError:i,isLoading:u}=(0,l.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:v}}=await f("/admin/license-limit-information");return v},{enabled:s}),T=t.useMemo(()=>c??{},[c]),E=t.useCallback(v=>(T?.features??[]).find(a=>a.name===v)?.options??{},[T?.features]);return{license:T,getFeature:E,isError:i,isLoading:u}}},38705:(x,g,e)=>{e.d(g,{uT:()=>w,fC:()=>p,Dx:()=>L});var t=e(67294),n=e(10574),l=e(96987),r=e(74622),s=e(71543),f=e(16607),c=e(96208),i=e(94101),u=e(35771),T=e(45697),E=e.n(T),v=e(86896),A=e(71997);const a=e.p+"0cd5f8915b265d5b1856.png",R="limits-title",S="https://strapi.io/pricing-cloud",P="https://strapi.io/contact-sales";function L({children:o}){return t.createElement(n.Z,{variant:"alpha",id:R},o)}L.propTypes={children:E().node.isRequired};function w({children:o}){return t.createElement(n.Z,{variant:"omega"},o)}w.propTypes={children:E().node.isRequired};function I(){const{formatMessage:o}=(0,v.Z)();return t.createElement(l.k,{gap:2,paddingTop:4},t.createElement(i.Q,{variant:"default",isExternal:!0,href:S},o({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(i.Q,{variant:"tertiary",isExternal:!0,href:P},o({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const F=A.default.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:o})=>`-${o.spaces[7]}`};
  margin-top: ${({theme:o})=>`-${o.spaces[7]}`};
  width: 360px;
`;function p({children:o,isOpen:X,onClose:b}){const{formatMessage:V}=(0,v.Z)();return X?t.createElement(r.P,{labelledBy:R},t.createElement(s.f,null,t.createElement(l.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(l.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},o,t.createElement(I,null)),t.createElement(l.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(F,{src:a,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(f.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(c.h,{icon:t.createElement(u.Z,null),"aria-label":V({id:"global.close",defaultMessage:"Close"}),onClick:b})))))):null}p.defaultProps={isOpen:!1},p.propTypes={children:E().node.isRequired,isOpen:E().bool,onClose:E().func.isRequired}},86978:(x,g,e)=>{e.d(g,{$k:()=>a,Ef:()=>w,FT:()=>P,Nj:()=>v,Ot:()=>T,QM:()=>i,VS:()=>R,_X:()=>I,bc:()=>E,gu:()=>l,k_:()=>A,lv:()=>S,qZ:()=>c,rg:()=>s,sN:()=>n,uL:()=>L,x4:()=>u,yq:()=>r,zn:()=>f});var t=e(12255);const n="settings_review-workflows",l="Settings/Review_Workflows/RESET_WORKFLOW",r="Settings/Review_Workflows/SET_CONTENT_TYPES",s="Settings/Review_Workflows/SET_IS_LOADING",f="Settings/Review_Workflows/SET_ROLES",c="Settings/Review_Workflows/SET_WORKFLOW",i="Settings/Review_Workflows/SET_WORKFLOWS",u="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",T="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",E="Settings/Review_Workflows/WORKFLOW_CLONE_STAGE",v="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",A="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGES",a="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",R="Settings/Review_Workflows/WORKFLOW_UPDATE",S={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},P=t.W.colors.primary600,L={STAGE:"stage"},w="numberOfWorkflows",I="stagesPerWorkflow"},5318:(x,g,e)=>{e.d(g,{k:()=>l,s:()=>r});var t=e(12255),n=e(86978);function l(s){if(!s)return null;const c=Object.entries(t.W.colors).filter(([,i])=>i.toUpperCase()===s.toUpperCase()).reduce((i,[u])=>(n.lv?.[u]&&(i=u),i),null);return c?{themeColorName:c,name:n.lv[c]}:null}function r(){return Object.entries(n.lv).map(([s,f])=>({hex:t.W.colors[s].toUpperCase(),name:f}))}},94101:(x,g,e)=>{e.d(g,{Q:()=>T});var t=e(85893),n=e(67294),l=e(71997),r=e(62485),s=e(20501),f=e(53342),c=e(96987),i=e(10574);const u=(0,l.default)(s.G)`
  text-decoration: none;

  &[aria-disabled='true'] {
    ${r.sg}
    &:active {
      ${r.sg}
    }
  }

  &:hover {
    ${r.yP}
  }

  &:active {
    ${r.tB}
  }

  ${r.PD}
`,T=n.forwardRef(({variant:E="default",startIcon:v,endIcon:A,disabled:a=!1,children:R,size:S="S",as:P=f.f,...L},w)=>{const I=S==="S"?2:"10px",F=4;return(0,t.jsxs)(u,{ref:w,"aria-disabled":a,size:S,variant:E,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:I,paddingLeft:F,paddingRight:F,paddingTop:I,pointerEvents:a?"none":void 0,...L,as:P||f.f,children:[v&&(0,t.jsx)(c.k,{"aria-hidden":!0,children:v}),(0,t.jsx)(i.Z,{variant:S==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:R}),A&&(0,t.jsx)(c.k,{"aria-hidden":!0,children:A})]})});T.displayName="LinkButton"}}]);
